programa repasoV2
procesos
  proceso Equipo1Juntar(ES cantFlores:numero; ES cantPapeles:numero; E avPosterior:numero; E avAnterior:numero)
  comenzar
    repetir 4
      mientras(HayFlorEnLaEsquina)
        tomarFlor
        cantFlores:=cantFlores+1
      mientras(HayPapelEnLaEsquina)
        tomarPapel
        cantPapeles:=cantPapeles+1
      BloquearEsquina(avPosterior,PosCa)
      mover
      LiberarEsquina(avAnterior,PosCa)
      avPosterior:=avPosterior+1
      avAnterior:=PosAv
  fin
  proceso Equipo2Juntar(ES cantFlores2:numero;ES cantPapeles2:numero; E caPosterior:numero; E caAnterior:numero)
  comenzar
    repetir 4
      mientras(HayFlorEnLaEsquina)
        tomarFlor
        cantFlores2:=cantFlores2+1
      mientras(HayPapelEnLaEsquina)
        tomarPapel
        cantPapeles2:=cantPapeles2+1
      BloquearEsquina(caPosterior,PosAv)
      mover
      LiberarEsquina(caAnterior,PosAv)
      caPosterior:=caPosterior+1
      caAnterior:=PosCa
  fin
areas
  areaComun:AreaC(1,1,20,20)
  areaUno:AreaP(21,1,21,1)
  areaDos:AreaP(22,1,22,1)
  areaTres:AreaP(23,1,23,1)
  areaCuatro:AreaP(24,1,24,1)
  areaCinco:AreaP(25,1,25,1)
  areaSeis:AreaP(26,1,26,1)
  areaFiscalizador:AreaP(27,1,27,1)
robots
  robot tipo1    {Robot Tipo1: Un solo robot para un equipo}
  variables
    avOriginal:numero
    caOriginal:numero  
    ca:numero
    cantFlores:numero
    cantPapeles:numero
    avPosterior:numero
    avAnterior:numero
  comenzar
    cantFlores:=0
    cantPapeles:=0
    avOriginal:=PosAv
    caOriginal:=PosCa
    RecibirMensaje(ca,RobotFiscalizador)
    Pos(1,ca)
    derecha
    avPosterior:=PosAv+1
    avAnterior:=PosAv
    Equipo1Juntar(cantFlores,cantPapeles,avPosterior,avAnterior)
    Pos(avOriginal,caOriginal)
    EnviarMensaje(ca,Robot2)
    EnviarMensaje(cantFlores,Robot2)
    EnviarMensaje(cantPapeles,Robot2)
  fin
  robot tipo2
  variables
    avOriginal:numero
    caOriginal:numero
    ca:numero
    cantFlores:numero
    cantPapeles:numero
    avPosterior:numero
    avAnterior:numero
  comenzar
    avOriginal:=PosAv
    caOriginal:=PosCa
    RecibirMensaje(ca,Robot1)
    RecibirMensaje(cantFlores,Robot1)
    RecibirMensaje(cantPapeles,Robot1)
    Pos(5,ca)
    derecha
    avPosterior:=PosAv+1
    avAnterior:=PosAv
    mover
    Equipo1Juntar(cantFlores,cantPapeles,avPosterior,avAnterior)
    Pos(avOriginal,caOriginal)
    EnviarMensaje(ca,Robot3)
    EnviarMensaje(cantFlores,Robot3)
    EnviarMensaje(cantPapeles,Robot3)
  fin
  robot tipo3
  variables
    ca:numero
    cantFlores:numero
    cantPapeles:numero
    avAnterior:numero
    avPosterior:numero
    avOriginal:numero
    caOriginal:numero
  comenzar
    avOriginal:=PosAv
    caOriginal:=PosCa
    RecibirMensaje(ca,Robot2)
    RecibirMensaje(cantFlores,Robot2)
    RecibirMensaje(cantPapeles,Robot2)
    Pos(10,ca)
    derecha
    avPosterior:=PosAv+1
    avAnterior:=PosAv
    mover
    Equipo1Juntar(cantFlores,cantPapeles,avPosterior,avAnterior)
    Pos(avOriginal,caOriginal)
    EnviarMensaje(3,RobotFiscalizador)
    EnviarMensaje(cantFlores,RobotFiscalizador)
    EnviarMensaje(cantPapeles,RobotFiscalizador)
  fin
  robot tipo4
  variables
    cantFlores2:numero
    cantPapeles2:numero
    av:numero
    caPosterior:numero
    caAnterior:numero
    avOriginal:numero
    caOriginal:numero
  comenzar
    cantFlores2:=0
    cantPapeles2:=0
    avOriginal:=PosAv
    caOriginal:=PosCa
    RecibirMensaje(av,RobotFiscalizador)
    Pos(av,1)
    caPosterior:=PosCa+1
    caAnterior:=PosCa
    Equipo2Juntar(cantFlores2,cantPapeles2,caPosterior,caAnterior)
    Pos(avOriginal,caOriginal)
    EnviarMensaje(av,Robot5)
    EnviarMensaje(cantFlores2,Robot5)
    EnviarMensaje(cantPapeles2,Robot5)
  fin
  robot tipo5
  variables
    avOriginal:numero
    caOriginal:numero
    av:numero
    cantFlores2:numero
    cantPapeles2:numero
    caAnterior:numero
    caPosterior:numero
  comenzar
    avOriginal:=PosAv
    caOriginal:=PosCa
    RecibirMensaje(av,Robot4)
    RecibirMensaje(cantFlores2,Robot4)
    RecibirMensaje(cantPapeles2,Robot4)
    Pos(av,5)
    mover
    caPosterior:=PosCa+1
    caAnterior:=PosCa
    Equipo2Juntar(cantFlores2,cantPapeles2,caPosterior,caAnterior)
    Pos(avOriginal,caOriginal)
    EnviarMensaje(av,Robot6)
    EnviarMensaje(cantFlores2,Robot6)
    EnviarMensaje(cantPapeles2,Robot6)
  fin
  robot tipo6
  variables
    avOriginal:numero
    caOriginal:numero
    av:numero
    cantFlores2:numero
    cantPapeles2:numero
    caPosterior:numero
    caAnterior:numero
  comenzar
    avOriginal:=PosAv
    caOriginal:=PosCa
    RecibirMensaje(av,Robot5)
    RecibirMensaje(cantFlores2,Robot5)
    RecibirMensaje(cantPapeles2,Robot5)
    Pos(av,10)
    mover
    caPosterior:=PosCa+1
    caAnterior:=PosCa
    Equipo2Juntar(cantFlores2,cantPapeles2,caPosterior,caAnterior)
    Pos(avOriginal,caOriginal)
    EnviarMensaje(6,RobotFiscalizador)
    EnviarMensaje(cantFlores2,RobotFiscalizador)
    EnviarMensaje(cantPapeles2,RobotFiscalizador)
  fin
  robot tipoFiscalizador
  variables
    ca:numero
    av:numero
    ID:numero
    cantFlores:numero
    cantPapeles:numero
    cantFlores2:numero
    cantPapeles2:numero
    totalEquipo1:numero
    totalEquipo2:numero
  comenzar
    totalEquipo1:=0
    totalEquipo2:=0
    Random(ca,5,20)
    EnviarMensaje(ca,Robot1)
    Random(av,1,15)
    EnviarMensaje(av,Robot4)
    repetir 2
      RecibirMensaje(ID,*)
      si(ID=3)
        RecibirMensaje(cantFlores,Robot3)
        RecibirMensaje(cantPapeles,Robot3)
      sino
        si(ID=6)
          RecibirMensaje(cantFlores2,Robot6)
          RecibirMensaje(cantPapeles2,Robot6)
    totalEquipo1:=cantFlores+cantPapeles
    totalEquipo2:=cantFlores2+cantPapeles2
    si(totalEquipo1>totalEquipo2)
      Informar(1)
    sino
      si(totalEquipo1=totalEquipo2)
        Informar(0)
      sino
        Informar(2)
  fin
variables
  Robot1:tipo1
  Robot2:tipo2
  Robot3:tipo3
  Robot4:tipo4
  Robot5:tipo5
  Robot6:tipo6
  RobotFiscalizador:tipoFiscalizador
comenzar
  AsignarArea(Robot1,areaComun)
  AsignarArea(Robot1,areaUno)
  AsignarArea(Robot2,areaComun)
  AsignarArea(Robot2,areaDos)
  AsignarArea(Robot3,areaComun)
  AsignarArea(Robot3,areaTres)
  AsignarArea(Robot4,areaComun)
  AsignarArea(Robot4,areaCuatro)
  AsignarArea(Robot5,areaComun)
  AsignarArea(Robot5,areaCinco)
  AsignarArea(Robot6,areaComun)
  AsignarArea(Robot6,areaSeis)
  AsignarArea(RobotFiscalizador,areaComun)
  AsignarArea(RobotFiscalizador,areaFiscalizador)
  Iniciar(Robot1,21,1)
  Iniciar(Robot2,22,1)
  Iniciar(Robot3,23,1)
  Iniciar(Robot4,24,1)
  Iniciar(Robot5,25,1)
  Iniciar(Robot6,26,1)
  Iniciar(RobotFiscalizador,27,1)
fin